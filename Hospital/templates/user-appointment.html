{% extends 'navigationBar.html' %}
{% block body %}

<div class="container mt-4">
  <h3 class="text-center">Book Appointment</h3>
  <hr>

  <form method="post">
    {% csrf_token %}

    <input type="hidden" name="schedule_id" value="{{ schedule_id }}">

    <div class="form-group">
      <label>Doctor</label>
      <input type="text" class="form-control" value="{{ doctor.name }}" readonly>
    </div>

    <div class="form-group">
      <label>Appointment Date & Time</label>
      <input type="text" class="form-control" value="{{ schedule.date }} ({{ schedule.start_time }} to {{ schedule.end_time }})" readonly>
    </div>

    <label>Booking For:</label>
    <select id="booking_type" name="booking_type" class="form-control">
      <option value="self">Yourself ({{ logged_in_patient.name }})</option>
      <option value="other">Other</option>
    </select>

    <!-- Additional form fields (hidden by default) -->
    <div id="other_form" style="display:none;" class="mt-3">
      <label>Name</label>
      <input type="text" name="name" class="form-control">

      <label>Age</label>
      <input type="number" name="age" class="form-control">

      <label>Gender</label>
      <input type="text" name="gender" class="form-control">

      <label>Address</label>
      <input type="text" name="address" class="form-control">

      <label>Mobile</label>
      <input type="text" name="mobile" class="form-control">
    </div>

    <button type="submit" class="btn btn-success btn-block mt-4">Confirm Appointment</button>
  </form>
</div>

<script>
document.getElementById("booking_type").addEventListener("change", function(){
    let form = document.getElementById("other_form");
    form.style.display = (this.value === "other") ? "block" : "none";
});
</script>

{% endblock %}
